<!-- card詳細ページ-->
<!DOCTYPE html>
<html lang="ja">
  <%- include('../include/head') %>
  <body>
  　<nav class="navbar navbar-expand-sm navbar-dark bg-dark mb-3">
      <div class="container">
        <h2 class="navbar-brand font-italic">Share Code</h2>
        <ul class="navbar-nav">
          <li class="nav-item"><a href="/posts" class="nav-link">トップ</a></li>
          <li class="nav-item"><a href="/user-list" class="nav-link">ユーザー</a></li>
          <li class="nav-item"><a href="/posts/new" class="nav-link">新規投稿</a></li>
          <li class="nav-item"><a href="/mypage" class="nav-link">マイページ</a></li>
          <li class="nav-item"><a href="/login" class="nav-link">ログイン</a></li>
        </ul>
      </div>
    </nav>

    <div class="container">
      <div class="row">
      <div class="card w-75 m-3">
        <div class="card-header font-weight-bold bg-dark">
          <img
          class="card-icon"
          src="https://s3-ap-northeast-1.amazonaws.com/share-code.bucket/upload-icon/<%= post.user.iconFileName %>"
          alt=""
          />
          <%= post.user.name %><i class="far fa-comment float-right mr-1 fa-lg"></i><i class="far fa-heart float-right mr-3 fa-lg"></i>
        </div>
        <div class="card-body bg-light border-success">
          <h4 class="card-title"><%= post.songName %></h4>
        <% if (post.isOriginal === "true") { %>
          <span>original</span>
        <% }; %>
          <p class="card-text"><%= post.codeProg %></p>
          <p class="w-75"><%= post.memo %></p>
        </div>
      </div>
      </div>
      <!--ログイン状態でなければコメントできないようにしている-->
      <% if(user.name !== null ) { %>
        <form method="post">
          <div class="w-75">
            <textarea name="content" class="bg-light w-100" placeholder="<%= user.name %>としてコメントを入力…"></textarea>
          </div>
          <div>
            <button class="btn btn-primary float-right">送信</button>
          </div>
        </form>
      <% } else { %>
        <a herf="/login">ログインしてコメントする…</a>
      <% }; %>

      <!-- コメントを全件表示-->
      <% comments.forEach(comment => { %>
        <div>
          <img
            class="comment-icon"
            src="https://s3-ap-northeast-1.amazonaws.com/share-code.bucket/upload-icon/<%= comment.user.iconFileName %>"
            alt=""
          />
          <span><%= comment.user.name %>
            <span class="border border-success w-75 mt-3 rounded">
              <%= comment.content %>
            </span>
          </span>
        </div>
      <% }); %>

      <script src="/javascripts/bunble.js"></script>
    </div>
  </body>
</html>