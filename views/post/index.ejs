<!--投稿一覧ページ  トップぺージイメージ-->
<!DOCTYPE html>
<html lang="ja">
  <%- include("../include/head") %>
  <body>
    <!-- ヘッダー部分 -->
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark mb-3">
      <div class="container">
        <h2 class="navbar-brand font-italic">Share Code</h2>
        <ul class="navbar-nav">
          <li class="nav-item active">
            <a href="/posts" class="nav-link">トップ</a>
          </li>
          <li class="nav-item">
            <a href="/user-list" class="nav-link">ユーザー</a>
          </li>
          <li class="nav-item">
            <a href="/posts/new" class="nav-link">新規投稿</a>
          </li>
          <li class="nav-item">
            <a href="/mypage" class="nav-link">マイページ</a>
          </li>
          <li class="nav-item">
            <a href="/login" class="nav-link">ログイン</a>
          </li>
        </ul>
      </div>
    </nav>


    <div class="container">
      <div class="row">

        <!--forEach文は 配列の数だけ処理を繰り返す-->
        <% post.forEach(posts => { %>
          <div class="card w-50 mt-3">
          <% if (posts.isOriginal === "true") { %>
          <div class="card-header font-weight-bold bg-primary">
            <img
              class="card-icon"
              src="https://s3-ap-northeast-1.amazonaws.com/share-code.bucket/upload-icon/<%= posts.user.iconFileName %>"
              alt=""
            />
            <%= posts.user.name %>
            <span class="float-right">
              <a href="/favorite/<%= posts.id %>"><!--/:postId-->
                <i class="far fa-heart fa-fw fa-lg"></i>
              </a>
              <span>
                <%= favorites.filter((v) => posts.id === v.postId).length%>
              </span>
              <i class="far fa-comment fa-fw ml-2 fa-lg"></i>
            </span>
          </div>

            <% } else { %>
            <div class="card-header font-weight-bold bg-success">
              <img
              class="card-icon"
              src="https://s3-ap-northeast-1.amazonaws.com/share-code.bucket/upload-icon/<%= posts.user.iconFileName %>"
              alt=""
              />
              <%= posts.user.name %>
              <span class="float-right">
                <a href="/favorite/<%= posts.id %>"><!--/:postId-->
                  <i class="far fa-heart fa-fw fa-lg"></i>
                </a>
                <span>
                  <%= favorites.filter((v) => posts.id === v.postId).length %>
                </span>
                <i class="far fa-comment fa-fw ml-2 fa-lg"></i>
                <span>
                  <%= comments.filter((v) => posts.id === v.postId).length %>
                </span>
            </div>
              <% }; %>

            <div class="card-body bg-light">
              <h4 class="card-title"><%= posts.songName %></h4>
              <p class="card-text code-prog"><%= posts.codeProg %></p>
              <p class="card-text"><%= posts.memo %></p>
              <!--このcardのidでこのcardの詳細ページにいく-->
              <a href="/posts/<%= posts.id %>">詳細</a>
            </div>
          </div>

          <br />
          <% }); %>

        </div>
        </div>
      </div>
    <script src="/javascripts/bunble.js"></script>
  </body>
</html>
